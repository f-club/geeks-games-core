//
//
//

const db = require('db');

function load_to_RAM(game_obj, game_name, cb) {

  cb = cb || function() {};

  if (!game_obj) {
    return cb({
      status: 400,
      err: new Error('low args')
    })
  }

  db.games_schemas.findOne({
    game_name
  }, {
    _id: true
  }).lean().exec(function(err, game) {
    if (err) {
      return cb({
        status: 500,
        err: err
      });
    }

    if (!game || !game._id) {
      return cb({
        status: 404,
        err: new Error('game not found')
      })
    }

    global.games[game._id] = game_obj;
    cb(null, true);
  })
}

module.exports = load_to_RAM;
