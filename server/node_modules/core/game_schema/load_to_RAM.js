//
//
//

const db = require('db');

function load_to_RAM(game_obj, game_name, cb) {

  cb = cb || function() {};

  if (!game_obj) {
    return cb({
      status: 400,
      err: new Error('low args')
    })
  }

  let query = {
    game_name
  };

  let view = {
    _id: true
  };

  db
    .games_schemas
    .findOne(query, view)
    .lean()
    .exec(function(err, game_schema) {

      if (err) {
        return cb({
          status: 500,
          err: err
        });
      }

      if (!game_schema || !game_schema._id) {
        return cb({
          status: 404,
          err: new Error('game not found')
        })
      }

      global.game_schemas[game_schema._id] = game_obj;

      return cb(null, true);
    })
}

module.exports = load_to_RAM;
