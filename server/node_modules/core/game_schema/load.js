//
//
//

const game_schema = require('core/game_schema');

function load(game_path, game_name, cb) {

  cb = cb || function() {};

  let game = require(game_path);

  if (!game || !game.db_init || !game.init || !game.turn || !game.config) {
    console.log(`not valid game => ${game.db_init.game_name}`);
    return cb({
      status: 400,
      err: new Error('no valid game.')
    })
  }

  let schema = game.db_init;
  schema.path = game_path;

  game_schema.add(schema, function(err, result) {

    if (err) {
      return cb({
        status: 500,
        err: err
      });
    }

    console.log(`game loaded => ${game.db_init.game_name}`);

    return cb(null, result);
  });
}

module.exports = load;
