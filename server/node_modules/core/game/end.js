//
//
//

const db = require('db');

function end(game_uuid, winner, cb) {

  cb = cb || function() {};

  if (!game_uuid) {
    return cb({
      status: 400,
      err: new Error('low args')
    });
  }

  let update = {
    $set: {
      finished: true
    }
  }

  if (winner) {
    update.$set['winner'] = winner;
  }

  db.games.update({
    uuid: game_uuid
  }, update, function(err, result) {
    if (err) {
      return cb({
        status: 500,
        err: err
      });
    }

    // TODO check result
    cb(null, true);
  })
}

module.exports = end;
