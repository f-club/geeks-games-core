//
//
//

const db = require('db');

function get_map(uuid, cb) {

  cb = cb || function() {};

  if (!uuid) {
    return cb({
      status: 400,
      err: new Error('low args')
    })
  }

  let query = {
    uuid
  };

  db.games.findOne(query, {
    map: true
  }).lean().exec(function(err, game) {

    if (err) {
      return cb({
        status: 500,
        err: err
      });
    }

    if (!game || !game.map) {
      return cb({
        status: 404,
        err: new Error('game or map not found.')
      });
    }

    cb(null, game.map);
  })
}

module.exports = get_map;
